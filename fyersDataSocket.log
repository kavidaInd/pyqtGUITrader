{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-19 22:12:33,482+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-19 22:12:33,522+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-19 22:26:01,002+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-19 22:26:01,003+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-19 22:49:15,815+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-19 22:49:15,816+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 11:49:27,858+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 11:49:27,875+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 11:51:27,264+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 11:51:27,266+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:02,782+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:03,889+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:13,665+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:14,754+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:19,117+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:20,201+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:24,559+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:25,648+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:30,015+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:31,105+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:40,756+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:41,844+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:46,205+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:47,297+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:51,672+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:52,762+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:57,137+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:53:58,242+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:54:02,674+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:54:03,784+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:54:18,933+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:54:20,052+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 155, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 52, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 107, in on_message\n    self.evaluate_trend_and_decision()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 159, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 114, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[on_close:1555] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 11:54:24,452+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 428, in setSock\n    dispatcher.read(self.sock.sock, read, check)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 99, in read\n    if not read_callback():\n           ~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 437, in read\n    op_code, frame = self.sock.recv_data_frame(True)\n                     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_core.py\", line 406, in recv_data_frame\n    frame = self.recv_frame()\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_core.py\", line 445, in recv_frame\n    return self.frame_buffer.recv_frame()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_abnf.py\", line 338, in recv_frame\n    self.recv_header()\n    ~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_abnf.py\", line 294, in recv_header\n    header = self.recv_strict(2)\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_abnf.py\", line 373, in recv_strict\n    bytes_ = self.recv(min(16384, shortage))\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_core.py\", line 529, in _recv\n    return recv(self.sock, bufsize)\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_socket.py\", line 108, in recv\n    bytes_ = _recv()\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_socket.py\", line 87, in _recv\n    return sock.recv(bufsize)\n           ~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\ssl.py\", line 1285, in recv\n    return self.read(buflen)\n           ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\ssl.py\", line 1140, in read\n    return self._sslobj.read(len)\n           ~~~~~~~~~~~~~~~~~^^^^^\nConnectionAbortedError: [WinError 10053] An established connection was aborted by the software in your host machine\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 547, in _callback\n    callback(self, *args)\n    ~~~~~~~~^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1663, in <lambda>\n    on_error=lambda ws, msg: self.On_error(msg),\n                             ~~~~~~~~~~~~~^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 501, in run_forever\n    setSock()\n    ~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 430, in setSock\n    handleDisconnect(e, reconnecting)\n    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 481, in handleDisconnect\n    self._callback(self.on_error, e)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 550, in _callback\n    _logging.error(\"error from callback {callback}: {err}\".format(callback=callback, err=e))\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_logging.py\", line 64, in error\n    _logger.error(msg)\n    ~~~~~~~~~~~~~^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_app.py\", line 507, in run_forever\n    _logging.info(\"tearing down on exception {err}\".format(err=e))\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\websocket\\_logging.py\", line 76, in info\n    _logger.info(msg)\n    ~~~~~~~~~~~~^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1551, in on_close\n    self.OnClose(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 301, in on_close\n    logger.warning(f\"WebSocket closed: {message}\")\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1531, in warning\n    self._log(WARNING, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 12:25:09,622+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 12:25:09,626+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 12:27:27,751+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 12:27:27,753+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 13:11:13,140+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 13:11:13,142+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 13:14:56,822+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 13:14:56,824+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 13:18:34,182+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 13:18:34,183+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 13:20:17,434+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 13:20:17,436+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[On_message:1446] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 13:20:28,784+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 213, in evaluate_trend_and_decision\n    if self.get_trading_mode() == \"algo\":\n       ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 62, in get_trading_mode\n    return self.trading_mode_var.get()\n           ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 119, in on_message\n    self.evaluate_trend_and_decision()  # Now non-blocking\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 218, in evaluate_trend_and_decision\n    logger.info(f\"Trend detection or decision logic error: {trend_error!r}\", exc_info=True)\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 126, in on_message\n    logger.error(f\"Exception in on_message: {e!r}, Message: {message}\", exc_info=True)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[__response_output:990] data_ws","message":"main thread is not in main loop","timestamp":"2026-02-20 13:20:29,880+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 213, in evaluate_trend_and_decision\n    if stop_loss is not None and current_price is not None and current_price <= stop_loss:\n       ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 62, in get_trading_mode\n    def initialize_market_state(self) -> None:\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 569, in get\n    value = self._tk.globalgetvar(self._name)\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 119, in on_message\n    elif symbol == self.symbol_full(self.state.put_option):\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 218, in evaluate_trend_and_decision\n    self.executor.exit_position(self.state)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1519, in info\n    self._log(INFO, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 411, in safe_callback\n    callback(message)\n    ~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\new_main.py\", line 126, in on_message\n    self.state.current_price = self.state.call_current_close \\\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1433, in On_message\n    self.OnMessage(message)\n    ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 413, in safe_callback\n    logger.error(f\"Exception in on_message_callback: {e!r}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 987, in __response_output\n    self.On_message(response)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1447, in On_message\n    self.On_error(e)\n    ~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1500, in On_error\n    self.OnError(message)\n    ~~~~~~~~~~~~^^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\data\\websocket_manager.py\", line 315, in on_error\n    logger.error(f\"WebSocket error: {message}\")\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1548, in error\n    self._log(ERROR, msg, args, **kwargs)\n    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1664, in _log\n    self.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1680, in handle\n    self.callHandlers(record)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1736, in callHandlers\n    hdlr.handle(record)\n    ~~~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\logging\\__init__.py\", line 1026, in handle\n    self.emit(record)\n    ~~~~~~~~~^^^^^^^^\n  File \"C:\\Users\\vikas\\OneDrive\\Desktop\\TradingGUI-master\\gui\\TextHandler.py\", line 28, in emit\n    level = record.levelname if record.levelname in self.text_widget.tag_names() else 'DEFAULT'\n                                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\tkinter\\__init__.py\", line 4102, in tag_names\n    self.tk.call(self._w, 'tag', 'names', index))\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError: main thread is not in main loop","exception_name":"RuntimeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 13:20:44,830+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 13:20:44,832+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 14:21:35,511+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 14:21:35,523+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
{"level":"ERROR","location":"[symbol_to_hsmtoken:126] data_ws","message":"cannot access local variable 'hsm_symbol' where it is not associated with a value","timestamp":"2026-02-20 14:32:20,815+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 115, in symbol_to_hsmtoken\n    datadict[hsm_symbol] = symbol\n             ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'hsm_symbol' where it is not associated with a value","exception_name":"UnboundLocalError"}
{"level":"ERROR","location":"[__symbol_conversion:1374] data_ws","message":"'NoneType' object is not subscriptable","timestamp":"2026-02-20 14:32:20,819+0530","service":"FyersDataSocket","exception":"Traceback (most recent call last):\n  File \"C:\\Users\\vikas\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\fyers_apiv3\\FyersWebsocket\\data_ws.py\", line 1333, in __symbol_conversion\n    if symbol_value[3] != \"\":\n       ~~~~~~~~~~~~^^^\nTypeError: 'NoneType' object is not subscriptable","exception_name":"TypeError"}
